@tailwind base;
@tailwind components;
@tailwind utilities;

/* Performance & Smoothness Improvements */
@layer base {
  html {
    scroll-behavior: smooth;
  }

  * {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
}

/* Professional fade-in animations */
@layer components {
  .fade-in-section {
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.6s ease-out, transform 0.6s ease-out;
  }

  .fade-in-section.is-visible {
    opacity: 1;
    transform: translateY(0);
  }

  /* Improved hover effects */
  .hover-lift {
    transition: transform 0.2s ease-out, box-shadow 0.2s ease-out;
  }

  .hover-lift:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  }

  /* Professional gradient overlays */
  .gradient-overlay {
    position: relative;
  }

  .gradient-overlay::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, rgba(31, 138, 110, 0.1) 0%, rgba(52, 211, 153, 0.05) 100%);
    border-radius: inherit;
    pointer-events: none;
  }

  /* Button ripple effect */
  .group:active::after {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(circle, rgba(255, 255, 255, 0.3) 0%, transparent 70%);
    border-radius: inherit;
    animation: ripple 0.6s ease-out;
    pointer-events: none;
  }

  @keyframes ripple {
    0% {
      transform: scale(0);
      opacity: 1;
    }
    100% {
      transform: scale(1);
      opacity: 0;
    }
  }

  /* Optimized scrollbar */
  ::-webkit-scrollbar {
    width: 8px;
  }

  ::-webkit-scrollbar-track {
    background: rgb(243 244 246);
  }

  ::-webkit-scrollbar-thumb {
    background: rgb(156 163 175);
    border-radius: 4px;
  }

  .dark ::-webkit-scrollbar-track {
    background: rgb(31 41 55);
  }

  .dark ::-webkit-scrollbar-thumb {
    background: rgb(75 85 99);
  }

  /* Mobile Touch Optimierungen für iPhone */
  .mobile-optimized {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
  }

  /* Verhindert horizontales Scrollen auf iPhone */
  .overflow-x-hidden {
    overflow-x: hidden !important;
    max-width: 100vw;
  }

  /* Input Field Mobile Fixes für iPhone */
  input, textarea, select {
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    font-size: 16px; /* Verhindert Zoom auf iOS */
    border-radius: 8px;
  }

  /* Container Overflow Fix für mobile */
  .container, .max-w-6xl, .max-w-4xl, .max-w-2xl {
    overflow-x: hidden;
    padding-left: 1rem;
    padding-right: 1rem;
  }

  /* iPhone spezifische Fixes - NUKLEAR EDITION für Werner */
  @supports (-webkit-touch-callout: none) {
    /* Nur auf echten iOS Geräten - maximale Breite nutzen */
    .mobile-form {
      margin-left: -1rem !important;
      margin-right: -1rem !important;
      padding-left: 1rem !important;
      padding-right: 1rem !important;
      width: calc(100% + 2rem) !important;
      max-width: none !important;
      box-sizing: border-box !important;
    }

    .mobile-form .grid {
      margin-left: 0 !important;
      margin-right: 0 !important;
      padding-left: 0 !important;
      padding-right: 0 !important;
    }

    .mobile-form .grid > * {
      margin-left: 0 !important;
      margin-right: 0 !important;
      padding-left: 0.5rem !important;
      padding-right: 0.5rem !important;
    }

    .mobile-form input,
    .mobile-form textarea {
      width: 100% !important;
      min-width: 0 !important;
      max-width: 100% !important;
      box-sizing: border-box !important;
    }
  }

  /* Backup für alle iOS Versionen */
  @media screen and (-webkit-min-device-pixel-ratio: 0) {
    .mobile-form {
      min-width: 0 !important;
      width: 100% !important;
    }
  }

  /* Extra für iPhone 12/13/14/15 */
  @media only screen and (device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) {
    .mobile-form {
      width: 100vw !important;
      margin-left: calc(-50vw + 50%) !important;
      margin-right: calc(-50vw + 50%) !important;
      padding-left: 1rem !important;
      padding-right: 1rem !important;
    }
  }

  /* Grid Layout Mobile Fix - WERNER EDITION */
  @media (max-width: 640px) {
    /* Container absolut maximal nutzen */
    .max-w-4xl {
      max-width: calc(100vw - 1rem) !important;
      margin-left: 0.5rem !important;
      margin-right: 0.5rem !important;
    }

    .grid {
      overflow-x: hidden;
      width: 100% !important;
    }

    .grid > * {
      min-width: 0;
      overflow-wrap: break-word;
      word-break: break-word;
      width: 100% !important;
    }

    /* Mobile Formular Optimierung - MAXIMALE BREITE */
    .mobile-form {
      width: 100% !important;
      min-width: 0 !important;
      max-width: 100% !important;
      margin: 0 !important;
      padding: 1rem !important;
    }

    .mobile-form input,
    .mobile-form textarea,
    .mobile-form select {
      width: 100% !important;
      min-width: 0 !important;
      max-width: 100% !important;
      box-sizing: border-box !important;
      margin: 0 !important;
    }

    /* Formular Container extra fix */
    .mobile-form .bg-white {
      width: 100% !important;
      margin-left: 0 !important;
      margin-right: 0 !important;
    }
  }

  /* Touch-Optimierung für Slider */
  .touch-pan-y {
    touch-action: pan-y;
    -webkit-overflow-scrolling: touch;
  }

  /* DEBUG MODE - Rote Rahmen für Werner's Diagnose */
  .debug-mode * {
    border: 1px solid red !important;
  }

  .debug-mode .mobile-form {
    border: 3px solid lime !important;
  }

  .debug-mode .mobile-form input,
  .debug-mode .mobile-form textarea {
    border: 2px solid yellow !important;
  }

  /* WERNER'S IPHONE INPUT FIX - VOLLE BREITE */
  @supports (-webkit-touch-callout: none) {
    .mobile-form input,
    .mobile-form textarea {
      width: calc(100% - 0px) !important;
      padding-left: 2.5rem !important;
      padding-right: 0.5rem !important;
      margin: 0 !important;
      box-sizing: border-box !important;
    }

    .mobile-form .relative {
      width: 100% !important;
      margin: 0 !important;
      padding: 0 !important;
    }

    .mobile-form .flex {
      gap: 0.5rem !important;
    }
  }

  /* Formular Container absolut sicher machen */
  .form-container-fix {
    width: 100vw !important;
    margin-left: calc(-50vw + 50%) !important;
    padding-left: 1rem !important;
    padding-right: 1rem !important;
    box-sizing: border-box !important;
  }

  /* ULTIMA RATIO - iPhone Input Maximale Breite */
  @media screen and (max-width: 480px) {
    .mobile-form input,
    .mobile-form textarea {
      width: 100% !important;
      min-width: 0 !important;
      max-width: 100% !important;
      padding-left: 2.5rem !important;
      box-sizing: border-box !important;
    }

    .mobile-form .relative {
      width: 100% !important;
      flex: 1 !important;
    }

    .mobile-form .flex {
      width: 100% !important;
      gap: 0.25rem !important;
    }

    .mobile-form .flex > * {
      flex: 1 !important;
      min-width: 0 !important;
    }
  }

  /* EINHEITLICHE FORM-FELD HÖHEN - iOS Safari Fix */
  .mobile-form input[type="text"],
  .mobile-form input[type="tel"],
  .mobile-form input[type="date"],
  .mobile-form textarea,
  .mobile-form button[type="submit"] {
    min-height: 48px;
    line-height: normal;
    padding: 12px 16px;
    padding-left: 2.5rem; /* Platz für Icons */
    font-size: 16px;
    box-sizing: border-box;
  }

  /* Speziell für iOS Safari Date Input */
  .mobile-form input[type="date"] {
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    background-color: white;
    background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3crect x='3' y='4' width='18' height='18' rx='2' ry='2'%3e%3c/rect%3e%3cline x1='16' y1='2' x2='16' y2='6'%3e%3c/line%3e%3cline x1='8' y1='2' x2='8' y2='6'%3e%3c/line%3e%3cline x1='3' y1='10' x2='21' y2='10'%3e%3c/line%3e%3c/svg%3e");
    background-repeat: no-repeat;
    background-position: right 12px center;
    background-size: 20px;
  }

  /* Dark mode date picker */
  .dark .mobile-form input[type="date"] {
    background-color: rgb(31 41 55);
    background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3crect x='3' y='4' width='18' height='18' rx='2' ry='2'%3e%3c/rect%3e%3cline x1='16' y1='2' x2='16' y2='6'%3e%3c/line%3e%3cline x1='8' y1='2' x2='8' y2='6'%3e%3c/line%3e%3cline x1='3' y1='10' x2='21' y2='10'%3e%3c/line%3e%3c/svg%3e");
  }

  /* Einheitlicher Submit Button */
  .mobile-form button[type="submit"] {
    display: flex;
    align-items: center;
    justify-content: center;
    padding-left: 16px !important; /* Kein Icon-Platz nötig */
    font-weight: 600;
  }

  /* Textarea spezielle Behandlung */
  .mobile-form textarea {
    min-height: 96px; /* Doppelte Höhe für Textarea */
    resize: vertical;
    padding-top: 12px;
  }
}